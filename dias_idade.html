<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora de Dias para Idade</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
      }
      pre {
        background-color: #f4f4f4;
        padding: 10px;
        border-radius: 5px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <h1>Convertendo idade para dias</h1>
    <p>Abra o console do navegador (F12) para ver os resultados detalhados</p>
  </body>
  <script>
    function eBissexto(ano) {
      return (ano % 4 == 0 && ano % 100 != 0) || ano % 400 == 0;
    }

    function diasMes(mes, ano) {
      if (mes === 2) return eBissexto(ano) ? 29 : 30;
      if ([4, 6, 9, 11].includes(mes)) return 30;
      return 31;
    }

    function diasparaIdade(totalDias) {
      if (totalDias <= 0) return { anos: 0, meses: 0, dias: 0 };

      let anos = 0;
      let meses = 0;
      let diasRestantes = totalDias;
      const anoAtual = new Date().getFullYear;

      while (diasRestantes >= 365) {
        const diasNoAno = eBissexto(anoAtual - anos) ? 366 : 365;
        if (diasRestantes >= diasNoAno) {
          diasRestantes -= diasNoAno;
          anos++;
        } else {
          break;
        }
      }
      let mesAtual = 1;
      const anoParaMeses = anoAtual - anos;
      while (diasRestantes > 0 && mesAtual <= 12) {
        const diasnoMesAtual = diasMes(mesAtual, anoParaMeses);
        if (diasRestantes >= diasnoMesAtual) {
          diasRestantes -= diasnoMesAtual;
          meses++;
          mesAtual++;
        } else {
          break;
        }
      }
      const dias = diasRestantes;
      return { anos, meses, dias };
    }

    function mostrarResultado(mensagem) {
      alert(mensagem);
      console.log(mensagem);
    }
    function main() {
      console.log("-- Conversor de Idade para dias --");
      try {
        const totalDias = parseInt(prompt("Digite o total de dias vividos: "));

        if (isNaN(totalDias)) {
          throw new Error("Por favor, digite um número válido!");
        }
        if (totalDias < 0) {
          throw new Error("O número de dias não pode ser negativo.");
        }
        const { anos, meses, dias } = diasparaIdade(totalDias);

        let resultado = `-- Resultado da Conversão --\n`;
        resultado += `Total de dias: ${totalDias}\n\n`;
        resultado += `Equivale a: \n`;
        resultado += `- ${anos} anos\n`;
        resultado += `- ${meses} meses\n`;
        resultado += `- ${dias} dias\n\n`;
        resultado += `Aproxidamente ${(totalDias / 365.25).toFixed(2)} anos\n`;
        resultado += `Equivalente a ${Math.floor(totalDias / 7)} semanas e ${
          totalDias % 7
        } dias`;

        mostrarResultado(resultado);
      } catch (e) {
        mostrarResultado(`Erro: ${e.message}`);
      }
    }

    function menu() {
      while (true) {
        const opcao = prompt(
          "Conversor de Dias para Idade\n\n" +
            "1. Converter dias\n" +
            "2. Sair\n\n" +
            "Escolha uma opção (1 - 2):\n"
        );

        if (opcao === null || opcao === "2") {
          alert("Obrigado por usar o conversor!");
          return;
        }
        switch (opcao) {
          case "1":
            main();
            break;
          default:
            alert("Opção inválida! Escolha 1 ou 2.");
        }
      }
    }

    menu();
  </script>
</html>
